<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Coding Aloud</title>
    <link>/</link>
    <description>Recent content on Coding Aloud</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Mon, 01 Feb 2021 00:00:00 +0000</lastBuildDate>
    
        <atom:link href="/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Generating signature certificates</title>
      <link>/post/generating-signature-certificates/</link>
      <pubDate>Mon, 01 Feb 2021 00:00:00 +0000</pubDate>
      
      <guid>/post/generating-signature-certificates/</guid>
      
        <description>&lt;p&gt;&lt;a href=&#34;https://gist.github.com/rsotolongo/80410cee05c26a7bcb17327d0c279b86&#34;&gt;Source code of support available at GitHub&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Sometimes assemblies (executables and libraries) are required to be sign and I don&amp;rsquo;t have a certificate available for test purpose. In this post I pretend to show how to generate a certificate to sign assemblies.&lt;/p&gt;
&lt;p&gt;First, we need to install OpenSSL that we can achive following the steps specified in the next link:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://medium.com/swlh/installing-openssl-on-windows-10-and-updating-path-80992e26f6a1&#34;&gt;Installing OpenSSL on Windows 10 and updating PATH&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Second, let&amp;rsquo;s create a batch script file called: &amp;ldquo;generateCertificate.cmd&amp;rdquo; with content:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;MD Certificate
CD Certificate

ECHO authorityKeyIdentifier=keyid,issuer&amp;gt;certificate.ext
ECHO basicConstraints=CA:FALSE&amp;gt;&amp;gt;certificate.ext
ECHO keyUsage=digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment&amp;gt;&amp;gt;certificate.ext
ECHO subjectAltName=@alt_names&amp;gt;&amp;gt;certificate.ext
ECHO.&amp;gt;&amp;gt;certificate.ext
ECHO [alt_names]&amp;gt;&amp;gt;certificate.ext
ECHO DNS.1=RS&amp;gt;&amp;gt;certificate.ext

openssl.exe genrsa -des3 -passout pass:&amp;#34;pass&amp;amp;1234&amp;#34; -out certificate.pass.key 2048
openssl.exe rsa -passin pass:&amp;#34;pass&amp;amp;1234&amp;#34; -in certificate.pass.key -out certificate.key
openssl.exe req -new -key certificate.key -out certificate.csr
openssl.exe x509 -req -sha256 -extfile certificate.ext -days 365 -in certificate.csr -signkey certificate.key -out certificate.crt
openssl.exe pkcs12 -export -out certificate.pfx -inkey certificate.key -in certificate.crt
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Roughly we create a folder (called: &amp;ldquo;Certificate&amp;rdquo;) and make it the working directory. After we create a file writing its content line by line. Finally, in several steps, we use tool: &amp;ldquo;openssl.exe&amp;rdquo; to generate the certificate. Notice the double quotes surrounding the password value due to it contains the special character ampersand (&amp;amp;). The source code for that file could be downloaded from &lt;a href=&#34;https://gist.github.com/rsotolongo/80410cee05c26a7bcb17327d0c279b86&#34;&gt;this GIST&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Assuming that we have copied it into folder: &amp;ldquo;C:\Temp&amp;rdquo;, let&amp;rsquo;s see what it does through the analysis of figure 1 representing its execution.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/generating-signature-certificates/01.png&#34; alt=&#34;Script execution&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 1: Script execution.&lt;/p&gt;
&lt;p&gt;The steps to pay more attention are indicated with red and yellow arrows while there are other optional steps indicated with blue arrows. The first red arrow is the common name that we choose for the certificate. This must to be the same value that we have to enter once the script asks for a value in the second red arrow.&lt;/p&gt;
&lt;p&gt;Yellow arrows are the password chosen for the certificate. While the first two values are specified in batch file: &amp;ldquo;generateCertificate.cmd&amp;rdquo;, the last two values have to be introduced manually when are requested. Tool: &amp;ldquo;openssl.exe&amp;rdquo; hides those values while are typed but they must to be match.&lt;/p&gt;
&lt;p&gt;Once all steps end successfully we can see the result in figure 2.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/generating-signature-certificates/02.png&#34; alt=&#34;Resulting certificate&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 2: Resulting certificate.&lt;/p&gt;
&lt;p&gt;That is a certificate we can use to sign assemblies (a process I will explain in a later post).&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://gist.github.com/rsotolongo/80410cee05c26a7bcb17327d0c279b86&#34;&gt;Source code of support available at GitHub&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Deploying NuGet packages</title>
      <link>/post/deploying-nuget-packages/</link>
      <pubDate>Mon, 25 Jan 2021 00:00:00 +0000</pubDate>
      
      <guid>/post/deploying-nuget-packages/</guid>
      
        <description>&lt;p&gt;&lt;a href=&#34;https://github.com/rsotolongo/RS.Blog.Projects/tree/main/DeployPackages&#34;&gt;Source code of support available at GitHub&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I a previous post we saw how to: &amp;ldquo;&lt;a href=&#34;../creating_nuget_packages&#34;&gt;Create NuGet packages&lt;/a&gt;&amp;rdquo; but the deployment step was still a manual process. Let&amp;rsquo;s try to automatize this. Figure 1 shows how to generate NuGet package for a .NET Core project (similar to the approach previously shown) using the project&amp;rsquo;s properties.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/deploying-nuget-packages/01.png&#34; alt=&#34;Creating NuGet package&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 1: &amp;ldquo;Creating NuGet package&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;This adds a couple of lines into the project file (.csproj) as figure 2 shows:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/deploying-nuget-packages/02.png&#34; alt=&#34;Project file properties to create NuGet package&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 2: &amp;ldquo;Project file properties to create NuGet package&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;My approach also uses MSBuild targets. The first step is to include the following code into the project file (.csproj):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt;Import&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Project=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;..\DeployPackage.targets&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Condition=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Exists(&amp;#39;..\DeployPackage.targets&amp;#39;)&amp;#34;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;Target&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Name=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;DeployingPackage&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;AfterTargets=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;GenerateNuspec&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;lt;MSBuild&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Projects=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;$(MsBuildThisFile)&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Targets=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;DeployPackage&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Properties=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;PackageIdentifier=$(PackageId);PackageVersion=$(Version);DeployPackage=true&amp;#34;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;/Target&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Basically, we import the target file: &amp;ldquo;DeployPackage.targets&amp;rdquo; and calls its task: &amp;ldquo;DeployPackage&amp;rdquo; passing two parameters: &amp;ldquo;PackageIdentifier&amp;rdquo; and &amp;ldquo;PackageVersion&amp;rdquo;. Content of file: &amp;ldquo;DeployPackage.targets&amp;rdquo; is:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;utf-8&amp;#34;?&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;Project&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;xmlns=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;http://schemas.microsoft.com/developer/msbuild/2003&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;lt;PropertyGroup&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;DeployPackages&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Condition=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#39;$(DeployPackages)&amp;#39; == &amp;#39;&amp;#39;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&lt;/span&gt;false&lt;span class=&#34;nt&#34;&gt;&amp;lt;/DeployPackages&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;NuGetPath&amp;gt;&lt;/span&gt;C:\Temp\&lt;span class=&#34;nt&#34;&gt;&amp;lt;/NuGetPath&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;NuGetUrl&amp;gt;&lt;/span&gt;https://dist.nuget.org/win-x86-commandline/latest/nuget.exe&lt;span class=&#34;nt&#34;&gt;&amp;lt;/NuGetUrl&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;NuGetSource&amp;gt;&lt;/span&gt;C:\Temp\Packages\&lt;span class=&#34;nt&#34;&gt;&amp;lt;/NuGetSource&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;ApiKey&amp;gt;&lt;/span&gt;45606a77-19e6-4de3-9302-e651a507c785&lt;span class=&#34;nt&#34;&gt;&amp;lt;/ApiKey&amp;gt;&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;lt;/PropertyGroup&amp;gt;&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;lt;Target&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Name=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;DownloadNuget&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Condition=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;!Exists(&amp;#39;$(NuGetPath)nuget.exe&amp;#39;)&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;Message&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Importance=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;high&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Text=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Downloading NuGet...&amp;#34;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;DownloadFile&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;SourceUrl=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;$(NuGeturl)&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;DestinationFolder=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;$(NuGetPath)&amp;#34;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;Message&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Importance=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;high&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Text=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;NuGet downloaded...&amp;#34;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;lt;/Target&amp;gt;&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;lt;Target&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Name=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;DeployPackage&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Condition=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;$(DeployPackage) OR $(DeployPackages)&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;DependsOnTargets=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;DownloadNuget&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;Message&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Importance=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;high&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Text=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Deploying package...&amp;#34;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;Exec&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Command=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;amp;quot;$(NuGetPath)nuget.exe&amp;amp;quot; push &amp;amp;quot;$(ProjectDir)bin\$(Configuration)\$(PackageIdentifier).$(PackageVersion).nupkg&amp;amp;quot; -Source $(NuGetSource) -ApiKey $(ApiKey)&amp;#34;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;Message&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Importance=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;high&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Text=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Package deployed...&amp;#34;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;lt;/Target&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;/Project&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;This target file makes all the magic. Let&amp;rsquo;s analyze it step by step.&lt;/p&gt;
&lt;p&gt;First, we specify a few variables that will be useful for the execution of tasks included in this file. Variable: &amp;ldquo;NuGetSource&amp;rdquo; has a value pointing to a local folder but it could be a web address.&lt;/p&gt;
&lt;p&gt;The task: &amp;ldquo;DeployPackage&amp;rdquo; (called from the project file) will be executed only if variables: &amp;ldquo;DeployPackage&amp;rdquo; or &amp;ldquo;DeployPackages&amp;rdquo; have value: &amp;ldquo;true&amp;rdquo;. Variable: &amp;ldquo;DeployPackage&amp;rdquo; is passed from the project file call and is designed to deploy only the NuGet package generated for that project. In the other hand, variable: &amp;ldquo;DeployPackages&amp;rdquo; is global to this file and is designed to deploy all packages generated in the solution (normally every project generates one different NuGet package). If this task matches the condition to be executed, it will execute its dependent task first.&lt;/p&gt;
&lt;p&gt;Task: &amp;ldquo;DownloadNuget&amp;rdquo; provides package manager: &amp;ldquo;NuGet.exe&amp;rdquo; in order to not deal with installed tools, tool paths, development environment differences between team members, etc. Once this task finish, it returns to the execution of the task: &amp;ldquo;DeployPackage&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;Finally, the package manager tool is called with all required parameters. Figure 3 shows an example of execution.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/deploying-nuget-packages/03.png&#34; alt=&#34;Deployment result&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 3: &amp;ldquo;Deployment result&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;Figure 4 shows the deployed package.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/deploying-nuget-packages/04.png&#34; alt=&#34;Deployed package&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 4: &amp;ldquo;Deployed package&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;I hope these simple instructions help you to automate NuGet deployments.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/rsotolongo/RS.Blog.Projects/tree/main/DeployPackages&#34;&gt;Source code of support available at GitHub&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Creating NuGet packages</title>
      <link>/post/creating-nuget-packages/</link>
      <pubDate>Mon, 18 Jan 2021 00:00:00 +0000</pubDate>
      
      <guid>/post/creating-nuget-packages/</guid>
      
        <description>&lt;p&gt;Lately I have been involved in the creation of several NuGet packages useful for some portals being developed. I want to share my knowledge in this topic.&lt;/p&gt;
&lt;p&gt;If we were developing libraries for .NET Core or .NET Standard life would be easy as figure 1 to figure 8 shows.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/01.png&#34; alt=&#34;Creating a new .NET Core library&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 1: &amp;ldquo;Creating a new .NET Core library&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/02.png&#34; alt=&#34;Default code&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 2: &amp;ldquo;Default code&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/03.png&#34; alt=&#34;First build results&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 3: &amp;ldquo;First build results&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/04.png&#34; alt=&#34;Project properties&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 4: &amp;ldquo;Project properties&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/05.png&#34; alt=&#34;Second build output&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 5: &amp;ldquo;Second build output&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/06.png&#34; alt=&#34;Second build results&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 6: &amp;ldquo;Second build results&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;But, life is not so easy and almost all our products use the .NET Framework (regular) meaning that Visual Studio don’t offer us such capabilities as figure 7 and 8 show.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/07.png&#34; alt=&#34;New .NET Framework Library&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 7: &amp;ldquo;New .NET Framework Library&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/08.png&#34; alt=&#34;Library project properties&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 8: &amp;ldquo;Properties for this kind of projects don’t include the Package feature&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;So, what alternative we have? Actually few of them: use Octopus to generate the package but this tricky due to Octopus use a custom made build of NuGet.exe, so the generated structure could not match and involve much steps to obtained.&lt;/p&gt;
&lt;p&gt;Other alternative is use &amp;ldquo;NuGet.exe&amp;rdquo; manually from the command line but this can be confusing and also involve many other steps to accomplish.&lt;/p&gt;
&lt;p&gt;I said once but I like to repeat it, I love NuGet packages, so, why not use a NuGet package to generate NuGet packages? Well, it already exists and is very easy to use. The first step is to add the package: &amp;ldquo;CreateNewNuGetPackageFromProjectAfterEachBuild&amp;rdquo; to the project that we want to distribute as a NuGet package. Figure 9 shows an example.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/09.png&#34; alt=&#34;Solution package management&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 9.&lt;/p&gt;
&lt;p&gt;After been added this package creates a directory inside the project root called: &amp;ldquo;_CreateNewNuGetPackage&amp;rdquo; and pretty much that’s is all you need. Figure 10 shows the structure created.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/10.png&#34; alt=&#34;Solution explorer&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 10.&lt;/p&gt;
&lt;p&gt;Once we build the project we can see the output in figure 11.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/11.png&#34; alt=&#34;Third build output&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 11.&lt;/p&gt;
&lt;p&gt;Figure 12 shows the build results.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/12.png&#34; alt=&#34;Third build results&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 12.&lt;/p&gt;
&lt;p&gt;Figure 13 shows the content of the generated package.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/13.png&#34; alt=&#34;Package contents&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 13.&lt;/p&gt;
&lt;p&gt;Notice that metadata is basically extracted from the assembly info or auto generated (the build output also have logs about this). We can change this if we include a metadata file as Figure 14 shows.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/14.png&#34; alt=&#34;Package metadata file&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 14.&lt;/p&gt;
&lt;p&gt;The content of this file depends of what you want for your package but as example:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-XML&#34; data-lang=&#34;XML&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;utf-8&amp;#34;?&amp;gt;&lt;/span&gt;
&lt;span class=&#34;c&#34;&gt;&amp;lt;!-- 
&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;  For more info on this file format visit http://docs.nuget.org/docs/reference/nuspec-reference.
&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;--&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;package&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;xmlns=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;lt;metadata&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;Portals.ClassLibrary1&lt;span class=&#34;nt&#34;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0.0&lt;span class=&#34;nt&#34;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;authors&amp;gt;&lt;/span&gt;Portals Development&lt;span class=&#34;nt&#34;&gt;&amp;lt;/authors&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;description&amp;gt;&lt;/span&gt;Class library to help portals development.&lt;span class=&#34;nt&#34;&gt;&amp;lt;/description&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;language&amp;gt;&lt;/span&gt;en-US&lt;span class=&#34;nt&#34;&gt;&amp;lt;/language&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;releaseNotes&amp;gt;&amp;lt;/releaseNotes&amp;gt;&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;lt;/metadata&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;/package&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Now the build results looks like figure 15.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/15.png&#34; alt=&#34;First generated packages&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 15.&lt;/p&gt;
&lt;p&gt;Figure 16 shows the content of the new generated package, this time with more accurate metadata.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/16.png&#34; alt=&#34;First package contents&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 16.&lt;/p&gt;
&lt;p&gt;At this point we were able to generate the package but what we really need is the possibility to consume it from another project. We need first to deploy it in an internal NuGet repository called: &amp;ldquo;McNuget&amp;rdquo;. Let’s explain how to do it.&lt;/p&gt;
&lt;p&gt;First open &amp;ldquo;$(ProjectDir)_CreateNewNuGetPackage\Config1.ps1&amp;rdquo; and made the modifications highlighted in yellow color in figure 17.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/17.png&#34; alt=&#34;Package generation configuration file&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 17.&lt;/p&gt;
&lt;p&gt;Basically we are specifying that in every build generate another package that contain all debug symbols including source codes to facilitate the debugging of this package. Do not append the configuration and platform used to build into the package name. Also we will eventually deploy this package to McNuget (I say eventually because is not automatic in every build) and the API for deploy into McNuget. This API was generated by the administrator of McNuget and sent it to us.&lt;/p&gt;
&lt;p&gt;Figure 18 shows the result of the build.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/18.png&#34; alt=&#34;Second generated packages&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 18.&lt;/p&gt;
&lt;p&gt;Notice the new two packages without the configuration and platform; one without debug symbols (same than figure 16) and other with symbols and source code as figure 19 shows.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/19.png&#34; alt=&#34;Second package contents&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 19.&lt;/p&gt;
&lt;p&gt;Is time to deploy the package into McNuget and to do this we need to execute &amp;ldquo;$(ProjectDir)_CreateNewNuGetPackage\RunMeToUploadNuGetPackage.cmd&amp;rdquo; as is shown in figure 20.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/20.png&#34; alt=&#34;Package upload command&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 20.&lt;/p&gt;
&lt;p&gt;Once is executed it will open a command line window and a dialog asking for the package to deploy as is shown in figure 21.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/21.png&#34; alt=&#34;Package upload dialog&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 21.&lt;/p&gt;
&lt;p&gt;Once the package is selected as is shown in figure 22…&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/22.png&#34; alt=&#34;Package upload selection&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 22.&lt;/p&gt;
&lt;p&gt;…it ask for a confirmation as figure 23 shows. One valid point to mention is that McNuget repository could be not configured to allow deployments of packages containing debugging and source code symbols. So the only option we can deploy is the regular package.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/23.png&#34; alt=&#34;Package upload confirmation&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 23.&lt;/p&gt;
&lt;p&gt;Once is accepted and if everything was OK, we should be able to see a screen similar to what figure 24 shows.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/24.png&#34; alt=&#34;Package upload result&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 24.&lt;/p&gt;
&lt;p&gt;Meaning that our package is in McNuget ready to be use. Let’s test it.&lt;/p&gt;
&lt;p&gt;Figure 25 shows the package management for another project.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/25.png&#34; alt=&#34;Project package management&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 25.&lt;/p&gt;
&lt;p&gt;Once the package is installed we can use its features. Figure 26 shows an example.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/creating-nuget-packages/26.png&#34; alt=&#34;Package usage sample&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 26.&lt;/p&gt;
&lt;p&gt;One last observation, we have deploy the regular package because hypothetically McNuget don’t allow to deploy packages with debugging symbols; but we have deployed the version built in &amp;ldquo;Debug&amp;rdquo; mode and this is not good, we suppose to deploy the version built in &amp;ldquo;Release&amp;rdquo; mode and gain more performance.&lt;/p&gt;
&lt;p&gt;This is everything I have to share with you today. Hopefully you find this guide useful for your projects once you want to generate NuGet packages.&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Creating and deploying releases using Octopus</title>
      <link>/post/using-octopus/</link>
      <pubDate>Mon, 11 Jan 2021 00:00:00 +0000</pubDate>
      
      <guid>/post/using-octopus/</guid>
      
        <description>&lt;p&gt;&lt;a href=&#34;https://github.com/rsotolongo/RS.Blog.Projects/tree/main/UsingOctopus&#34;&gt;Source code of support available at GitHub&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Since while ago I wanted to share my experiences automatizing the product releases with Octopus from Visual Studio. Again, let’s do it through an example.&lt;/p&gt;
&lt;p&gt;As it could not be otherwise, figure 1 shows the first package you should add to your project in order to create Octopus packages ready to be deployed: &amp;ldquo;OctoPack&amp;rdquo;. The latest package version available at the time of this tutorial was the &amp;ldquo;3.6.1&amp;rdquo; but we installed the &amp;ldquo;3.6.0&amp;rdquo; on purpose in order to show the update process.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/01.png&#34; alt=&#34;OctoPack package&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 1.&lt;/p&gt;
&lt;p&gt;Figure 2 show the second package that should be installed: &amp;ldquo;OctopusTool&amp;rdquo;. Same here, latest version available was the &amp;ldquo;4.17.0&amp;rdquo; but we installed the &amp;ldquo;4.15.7&amp;rdquo; with the same purpose.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/02.png&#34; alt=&#34;OctopusTool package&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 2.&lt;/p&gt;
&lt;p&gt;Once both packages are installed we can check the &amp;ldquo;packages&amp;rdquo; folder inside solution folder (C:\Temp\WebApplication1\packages) in this case. Figure 3 show the folder contents.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/03.png&#34; alt=&#34;Installed packages&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 3.&lt;/p&gt;
&lt;p&gt;Now start the funny steps. First, we need to open the project file (WebApplication1.csproj) in this case. At the end of the file we need to delete the &amp;ldquo;Import&amp;rdquo; task of &amp;ldquo;OctoPack.targets&amp;rdquo; from the NuGet package folder. This is VERY important step because have to be repeated every time &amp;ldquo;OctoPack&amp;rdquo; package is updated. Figure 4 show the line that needs to be deleted.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/04.png&#34; alt=&#34;Project file content&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 4.&lt;/p&gt;
&lt;p&gt;Let’s explain a little bit deeper here. MSBuild will import and execute the targets of &amp;ldquo;OctoPack&amp;rdquo; in every build. If we keep that line the file that need to be modified is that one that is located in the package folder, meaning that normally is not part of the TFS controlled items and it will be loose in every package update. NuGet delete the old package folder once the new version is downloaded after an update. To avoid these rollbacks, and keep updated the packages at same time is good practice to delete this line and continue the process as I recommend in next steps.&lt;/p&gt;
&lt;p&gt;Create a new folder inside the project to be deployed and copy the file &amp;ldquo;OctoPack.targets&amp;rdquo; to it. I usually call this folder &amp;ldquo;Deployment&amp;rdquo; and keep the file with the same name. I mean, copy &amp;ldquo;$(SolutionDir)\packages\OctoPack.X.Y.Z\build\OctoPack.targets&amp;rdquo; to &amp;ldquo;$(ProjectDir)\Deployment\OctoPack.targets&amp;rdquo; Figure 5 shows this step.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/05.png&#34; alt=&#34;OctoPack file tasks&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 5.&lt;/p&gt;
&lt;p&gt;In file: &amp;ldquo;OctoPack.targets&amp;rdquo; inside &amp;ldquo;Deployment&amp;rdquo; folder, we need to modify some fields and add few others.&lt;/p&gt;
&lt;p&gt;The first two fields we need to modify are those that point to the Octopus libraries to execute the specified tasks. Figure 6 show it.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/06.png&#34; alt=&#34;Imported tasks&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 6.&lt;/p&gt;
&lt;p&gt;Because we have moved the targets file we need to update those paths to the libraries inside the package folder. Because are inside the &amp;ldquo;Deployment&amp;rdquo; folder we need go up two levels until solution folder where &amp;ldquo;package&amp;rdquo; folder is. Notice that in every update of the &amp;ldquo;OctoPack&amp;rdquo; package, we need to update these paths.&lt;/p&gt;
&lt;p&gt;After, we need to specify the value of the &amp;ldquo;OctoPackNuGetExePath&amp;rdquo; I like to use what is included in the package being used because Octopus use a custom-made version of NuGet.exe, so is better to use what is included in the package, for that reason: &amp;ldquo;..\packages\OctoPack.3.6.0\build\NuGet.exe&amp;rdquo; is a good value (notice that is depends of the package version too and we go up only one level because this is executed from the project root folder). Last variable to modify here is &amp;ldquo;OctoPackPublishPackageToFileShare&amp;rdquo; that should point into the shared directory where package will be copied to be deployed to Octopus. We normally use &amp;ldquo;\rant.com\Nuget&amp;rdquo;, so &amp;ldquo;\rant.com\Nuget\Portals.WebApplication1&amp;rdquo; is a good value for it. Figure 7 show the modifications.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/07.png&#34; alt=&#34;Task configuration variable values&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 7.&lt;/p&gt;
&lt;p&gt;Now what we need to do is configure the project to execute the task once is build. Remember the line deleted in figure 4? We need to add a line there as is shown in figure 8.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/08.png&#34; alt=&#34;Project file imported tasks&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 8.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-XML&#34; data-lang=&#34;XML&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt;Import&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Project=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;.\Deployment\OctoPack.targets&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Condition=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Exists(&amp;#39;.\Deployment\OctoPack.targets&amp;#39;)&amp;#34;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Once this line is added we can build the solution but &amp;ldquo;\rant.com\Nuget\Portals.WebApplication1&amp;rdquo; continues being empty. Why? Because we need to change the value of variable &amp;ldquo;RunOctoPack&amp;rdquo; to &amp;ldquo;true&amp;rdquo; as figure 9 shows.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/09.png&#34; alt=&#34;Execute task setting value&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 9.&lt;/p&gt;
&lt;p&gt;Now, if we build again the solution we obtain the results shown in figure 10 and a package file in &amp;ldquo;\rant.com\Nuget\Portals.WebApplication1&amp;rdquo; as figure 11 shows.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/10.png&#34; alt=&#34;First compilation results&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 10.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/11.png&#34; alt=&#34;First generated package&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 11.&lt;/p&gt;
&lt;p&gt;So far so good except that no matter how many times we build, the package generated will be the same version: &amp;ldquo;1.0.0.0&amp;rdquo; that is not good for automatic Octopus releases. So, let’s fix this opening the file &amp;ldquo;AssemblyInfo.cs&amp;rdquo; inside &amp;ldquo;Properties&amp;rdquo; project directory and change the &amp;ldquo;AssemblyVersion&amp;rdquo; attribute from &amp;ldquo;1.0.0.0&amp;rdquo; to &amp;ldquo;1.0.*&amp;rdquo; as is shown in figure 12.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/12.png&#34; alt=&#34;Assembly file information&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 12.&lt;/p&gt;
&lt;p&gt;Doing that we ensure that every build will have a different assembly version, meaning different Octopus release version that we will configure in the following steps. Please see figure 13 and 14 to notice the changes.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/13.png&#34; alt=&#34;Second compilation results&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 13.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/14.png&#34; alt=&#34;Second generated package&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 14.&lt;/p&gt;
&lt;p&gt;Let’s go again to file: &amp;ldquo;OctoPack.targets&amp;rdquo; and add the section highlighted in figure 15.&lt;/p&gt;
&lt;p&gt;This region is totally new section that we should add in order to configure (not execute) automatic releases to Octopus. The code is:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-XML&#34; data-lang=&#34;XML&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt;OctoExePath&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Condition=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#39;$(OctoExePath)&amp;#39; == &amp;#39;&amp;#39;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&lt;/span&gt;..\packages\OctopusTools.4.15.7\tools\Octo.exe&lt;span class=&#34;nt&#34;&gt;&amp;lt;/OctoExePath&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;OctopusProject&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Condition=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#39;$(OctopusProject)&amp;#39; == &amp;#39;&amp;#39;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&lt;/span&gt;Portals.WebApplication1&lt;span class=&#34;nt&#34;&gt;&amp;lt;/OctopusProject&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;OctopusEnvironment&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Condition=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#39;$(OctopusEnvironment)&amp;#39; == &amp;#39;&amp;#39;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&lt;/span&gt;Development&lt;span class=&#34;nt&#34;&gt;&amp;lt;/OctopusEnvironment&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;OctopusPortal&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Condition=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#39;$(OctopusPortal)&amp;#39; == &amp;#39;&amp;#39;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&lt;/span&gt;http://octopus.rant.com/Web&lt;span class=&#34;nt&#34;&gt;&amp;lt;/OctopusPortal&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;OctopusApiKey&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Condition=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#39;$(OctopusApiKey)&amp;#39; == &amp;#39;&amp;#39;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&lt;/span&gt;API-L6NRPGPZB4V1EYDVUX23KDXUJU&lt;span class=&#34;nt&#34;&gt;&amp;lt;/OctopusApiKey&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;OctopusNotes&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Condition=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#39;$(OctopusNotes)&amp;#39; == &amp;#39;&amp;#39;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&lt;/span&gt;New release sample notes.&lt;span class=&#34;nt&#34;&gt;&amp;lt;/OctopusNotes&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;/using-octopus/15.png&#34; alt=&#34;Release configuration settings&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 15.&lt;/p&gt;
&lt;p&gt;Because this is executed from the project root folder, we need to go up only one level. The &amp;ldquo;OctoExePath&amp;rdquo; is the only one variable dependent of the path of the &amp;ldquo;OctopusTools&amp;rdquo; package. The variables &amp;ldquo;OctopusProject&amp;rdquo;, &amp;ldquo;OctopusEnvironment&amp;rdquo;, &amp;ldquo;OctopusPortal&amp;rdquo;, and &amp;ldquo;OctopusApiKey&amp;rdquo; depends of your project Octopus configuration but what I can say here is that normally we only release to &amp;ldquo;Development&amp;rdquo; environment and I’ll talk about the API variable after in this document. Finally, we specify the value for the release notes in the variable &amp;ldquo;OctopusNotes&amp;rdquo; that normally are included in the email sent by Octopus server once a new release finished to be deployed.&lt;/p&gt;
&lt;p&gt;Once again, that region is only for configure variables related with Octopus for create releases. To actually create the releases, we need to add the following lines to the end of that file. Figure 16 shows the results.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-XML&#34; data-lang=&#34;XML&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt;Message&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Text=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Creating release in Octopus Portal: $(OctoPackPackageVersion)&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Condition=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#39;$(OctoExePath)&amp;#39; != &amp;#39;&amp;#39;&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Importance=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Normal&amp;#34;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;Exec&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Command=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;&amp;#34;$(OctoExePath)&amp;#34; create-release --server=&amp;#34;$(OctopusPortal)&amp;#34; --project=&amp;#34;$(OctopusProject)&amp;#34; --apikey=&amp;#34;$(OctopusApiKey)&amp;#34; --deployto=&amp;#34;$(OctopusEnvironment)&amp;#34; --version=$(OctoPackPackageVersion) --packageversion=$(OctoPackPackageVersion)&amp;#39;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;Condition=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#39;$(OctoExePath)&amp;#39; != &amp;#39;&amp;#39;&amp;#34;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;/using-octopus/16.png&#34; alt=&#34;Release configuration tasks&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 16.&lt;/p&gt;
&lt;p&gt;Figure 17 show the build output, notice the highlighted section after the last message received in figure 10.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/17.png&#34; alt=&#34;Third compilation output&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 17.&lt;/p&gt;
&lt;p&gt;If you open Octopus portal in your project after the build you can get something like what is shown in figure 18.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/18.png&#34; alt=&#34;Octopus project portal&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 18.&lt;/p&gt;
&lt;p&gt;So, with just a change of a word: &amp;ldquo;false&amp;rdquo; by &amp;ldquo;true&amp;rdquo; in variable &amp;ldquo;RunOctoPack&amp;rdquo; we achieved many results: An Octopus package ready for be deployed and an Octopus release with product deployed in the specified environment. The risk here is leave that variable as true and/or check-in it as true and make a release in every build. That happens but usually is not what I like to do, so I pay double attention before check-in changes in this file.&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s talk now about packages update. Figure 19 show the updates available.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/19.png&#34; alt=&#34;Packages update&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 19.&lt;/p&gt;
&lt;p&gt;After update both packages, Visual Studio deletes the old versions as Figure 20 shows.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/20.png&#34; alt=&#34;Updated package folders&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 20.&lt;/p&gt;
&lt;p&gt;Thanks that we are using the targets not from the package location but from inside project location, what we have to do is update all old version references to the new version references, meaning all &amp;ldquo;3.6.0&amp;rdquo; by &amp;ldquo;3.6.1&amp;rdquo; and all &amp;ldquo;4.15.7&amp;rdquo; by &amp;ldquo;4.17.0&amp;rdquo;. There are 3 places in &amp;ldquo;OctoPack.targets&amp;rdquo; for the first changes and only one place for the second change.&lt;/p&gt;
&lt;p&gt;Figures 21 and 22 shows the respective places.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/21.png&#34; alt=&#34;Updated creation task settings&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 21.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/22.png&#34; alt=&#34;Updated deployment task settings&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 22.&lt;/p&gt;
&lt;p&gt;One more thing, the API value for Octopus releases can be generated accessing to the Octopus portal&amp;hellip;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://octopus.rant.com/Web/&#34;&gt;http://octopus.rant.com/Web/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&amp;hellip;and follow the steps in figure 23 to figure 26.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/23.png&#34; alt=&#34;Octopus profile option&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 23.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/24.png&#34; alt=&#34;Octopus profile settings&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 24.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/25.png&#34; alt=&#34;Octopus API key generation option&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 25.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/26.png&#34; alt=&#34;Octopus API key generation result&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 26.&lt;/p&gt;
&lt;p&gt;Is important that you save this key because as soon as you close this dialog, you will not be able to see that value again.&lt;/p&gt;
&lt;p&gt;One last thing, some projects could bring new problems to the table because is they are being deployed by country: meaning different Octopus projects, environments, physical path, etc. So, the idea is to have multiple &amp;ldquo;.target&amp;rdquo; files in the &amp;ldquo;Deployment&amp;rdquo; folder and added in the same way we did in the &amp;ldquo;.csproj&amp;rdquo; file. Figure 27 and 28 shows an example.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/27.png&#34; alt=&#34;Multi target files&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 27.&lt;/p&gt;
&lt;p&gt;Targets for Chile and Brazil were added to deploy those respective instances.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/28.png&#34; alt=&#34;Project file using multi-target&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 28.&lt;/p&gt;
&lt;p&gt;Here in the .csprj is important to have the first target create (let’s call it from now on the &amp;ldquo;general one&amp;rdquo; or &amp;ldquo;generic one&amp;rdquo; -OctoPack.targets-) as the last one in the list of targets imported.&lt;/p&gt;
&lt;p&gt;Figures 29 and 30 shows the content of those new targets created.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/29.png&#34; alt=&#34;First specific target file&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 29.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/30.png&#34; alt=&#34;Second specific target file&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 30.&lt;/p&gt;
&lt;p&gt;Basically, both new targets are very small files sharing the same structure but with very specific values for the country instance.&lt;/p&gt;
&lt;p&gt;RunOctoPack
OctopusProject
OctopusNotes&lt;/p&gt;
&lt;p&gt;They are the variables specific to the instance that should change the value at the time to deployment. All are controlled now using a new condition that depends of the value of a new variable introduced: &amp;ldquo;Deploy…&amp;rdquo; (&amp;ldquo;DeployBrazil&amp;rdquo; and &amp;ldquo;DeployChile&amp;rdquo; in the figures). Is valid to mention that is possible to include more variables as the version we want to use, etc.&lt;/p&gt;
&lt;p&gt;This new variable is the only one what we should change if we decided to deploy that instance. For example, is I want to deploy Brazil instance I put the value of variable &amp;ldquo;DeployBazil&amp;rdquo; as &amp;ldquo;true&amp;rdquo; in file &amp;ldquo;OctoPack (Brazil).targets&amp;rdquo; and that will make &amp;ldquo;RunOctoPack&amp;rdquo; as true and &amp;ldquo;OctopusProject&amp;rdquo; as the name of Octopus project for Brazil instance. Because the target for Brazil is imported before the generic one in the .csproj file, once that target is executed in build time, it will deploy using those values specified.&lt;/p&gt;
&lt;p&gt;Last but not less important, we must modify the generic target to delete the value for &amp;ldquo;OctopusProject&amp;rdquo;. See figure 31.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/using-octopus/31.png&#34; alt=&#34;Updated release setting for multi-target&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 31.&lt;/p&gt;
&lt;p&gt;I hope you enjoyed this guide and find it useful.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/rsotolongo/RS.Blog.Projects/tree/main/UsingOctopus&#34;&gt;Source code of support available at GitHub&lt;/a&gt;&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Coding style using StyleCop</title>
      <link>/post/stylecop-coding-style/</link>
      <pubDate>Mon, 04 Jan 2021 00:00:00 +0000</pubDate>
      
      <guid>/post/stylecop-coding-style/</guid>
      
        <description>&lt;p&gt;A colleague ask me to share my experience coding with ReSharper and once he heard that I’m not use ReSharper he was even more curious about how I write source codes. Who knows me knows I love NuGet packages and be updated constantly, that’s why I found a very useful package that I install in all my projects as soon I start it.&lt;/p&gt;
&lt;p&gt;StyleCop.MSBuild&lt;/p&gt;
&lt;p&gt;StyleCop used to be a standalone application with integration with Visual Studio but that changed a while ago. I’ll explain through an example. Let’s start creating a console application from scratch.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/stylecop-coding-style/01.png&#34; alt=&#34;Console application&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 1 show a just created console application in Visual Studio.&lt;/p&gt;
&lt;p&gt;Notice the 0 errors, 0 warnings, and 0 messages once is compiled. Let’s install the NuGet package and see what happens. Figure 2 shows the management of NuGet packages for the application.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/stylecop-coding-style/02.png&#34; alt=&#34;Solution package management&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 2.&lt;/p&gt;
&lt;p&gt;Figure 3 shows the results of the solution build once that package is installed.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/stylecop-coding-style/03.png&#34; alt=&#34;First build results&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 3.&lt;/p&gt;
&lt;p&gt;Notice the 11 warnings. My personal philosophy is deliver products with zero errors (that is logic because compilers and managers looks for it); zero warnings (few tools and people prevent you to deploy with warnings); and zero messages (practically nobody cares about this).&lt;/p&gt;
&lt;p&gt;Most of the warnings received are self-explanatory and easy to fix. Let’s analyze them one by one.&lt;/p&gt;
&lt;p&gt;The first and the last one are related with the fact that files &amp;ldquo;Program.cs&amp;rdquo; and &amp;ldquo;AssemblyInfo.cs&amp;rdquo; don’t have header and can be fixed just adding a header in XML format containing the name of the file among other information useful.&lt;/p&gt;
&lt;p&gt;The following five warnings are related with the fact that &amp;ldquo;using&amp;rdquo; statements should be inside the namespace and not outside as the template put it. The solution is obvious, just move the statements inside the namespace.&lt;/p&gt;
&lt;p&gt;The following four warnings are related with the lack of documentation in the different code instruments: classes and methods in this case. Once the documentation are added the warnings disappear.&lt;/p&gt;
&lt;p&gt;Figure 4 show the build result after applied the above fixes.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/stylecop-coding-style/04.png&#34; alt=&#34;Second build results&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 4.&lt;/p&gt;
&lt;p&gt;Notice the new two warnings. At this point is good to mention that this is an iterative procedure until the goal (0 errors, 0 warnings, 0 messages). Also the not used &amp;ldquo;using&amp;rdquo; statements were deleted (those gray out). Figure 5 shows the new result once we fix these two warnings adding &amp;ldquo;public&amp;rdquo; modifier to the class and the method.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/stylecop-coding-style/05.png&#34; alt=&#34;First fix&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 5.&lt;/p&gt;
&lt;p&gt;Hurrah! We made it! But (there is always a but, right?), these is possible because the rule set that we have configured in the project to report warnings. So, let’s be more picky changing the rule set.&lt;/p&gt;
&lt;p&gt;Figure 6 shows the project properties in the &amp;ldquo;Code Analysis&amp;rdquo; option. Notice the unselected checkbox: &amp;ldquo;Enable Code Analysis on Build&amp;rdquo; and the &amp;ldquo;Microsoft Managed Recommended Rules&amp;rdquo; in the Rule Set dropdown.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/stylecop-coding-style/06.png&#34; alt=&#34;Project properties settings&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 6.&lt;/p&gt;
&lt;p&gt;If you enable the checkbox without install the NuGet package you will not receive any warnings and if also you change the rule set without install the NuGet package you will receive only 2 warnings also returned by the StyleCop package because what is does is add many more rules to the working set. That is the reason why I love to add it to my projects and not only use what is included in Visual Studio.&lt;/p&gt;
&lt;p&gt;Figure 7 show the recommended options.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/stylecop-coding-style/07.png&#34; alt=&#34;Recommended options&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 7.&lt;/p&gt;
&lt;p&gt;Yes, &amp;ldquo;Microsoft All Rules&amp;rdquo;, more strict we are, better code we obtain if we follow the criteria to obtain at the end 0 errors, 0 warnings, and 0 messages.&lt;/p&gt;
&lt;p&gt;Figure 8 shows the results of the build after the new options for code analysis.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/stylecop-coding-style/08.png&#34; alt=&#34;Third build results&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 8.&lt;/p&gt;
&lt;p&gt;Six new warnings, time to start again. Uhmmm… The first two don’t have a file associated, how I can fix them? Well there is a solution. Right click in the code &amp;ldquo;CA2210&amp;rdquo; in this case, select the option for &amp;ldquo;Suppress&amp;rdquo; and then the option &amp;ldquo;In Suppression File&amp;rdquo; as is shown in figure 9.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/stylecop-coding-style/09.png&#34; alt=&#34;Rule fix options&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 9.&lt;/p&gt;
&lt;p&gt;Once this option is selected a new file called &amp;ldquo;GlobalSuppressions.cs&amp;rdquo; is created in the root of the project as is shown in figure 10.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/stylecop-coding-style/10.png&#34; alt=&#34;Rules suppressions file&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 10.&lt;/p&gt;
&lt;p&gt;At this point I would like to mention that there are occasions where you can suppress the warning in the suppression file and others directly in the source code. In the figure 10 there are still 5 more warnings to fix. My choices are suppress in global suppression file the first warning, and suppress in source code the fourth warning. To suppress in source code you should do almost the same: right click in the warning’s code, select &amp;ldquo;Suppression&amp;rdquo; option and then select option &amp;ldquo;In Source&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;This option adds an attribute above the method being reported containing the code to suppress the warning, similar to the code added into &amp;ldquo;GlobalSuppressions.cs&amp;rdquo; file.&lt;/p&gt;
&lt;p&gt;The second warning can be fixed marking the &amp;ldquo;Main&amp;rdquo; method as &amp;ldquo;static&amp;rdquo;; while the third can be fixed removing the &amp;ldquo;args&amp;rdquo; parameter (and its documentation in the method comments). Finally the fifth warning can be fixed just correcting the spelling of the word. Yes, StyleCop also include spell checking, great isn’t?&lt;/p&gt;
&lt;p&gt;Once all remaining warnings are addressed, we can build again and see what is reported this time, figure 11 show that.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/stylecop-coding-style/11.png&#34; alt=&#34;Fourth build results&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 11.&lt;/p&gt;
&lt;p&gt;What? More warnings? Yes, remember that you added a new file: &amp;ldquo;GlobalSuppressions.cs&amp;rdquo; and that file enter to the loop to reports compilation warnings too. So, is time to fix the new reported warnings.&lt;/p&gt;
&lt;p&gt;All suppressions trough code (source code of &amp;ldquo;GlobalSuppressions.cs&amp;rdquo; file or attributes in the code instruments) must to have a justification. I use my initials as justification as a way to tracking who decided to suppress this warning. That is how I fix the first and third warnings.&lt;/p&gt;
&lt;p&gt;The second warning can be fix adding the header to the file &amp;ldquo;GlobalSuppressions.cs&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;The fourth warning ask for the use of &amp;ldquo;////&amp;rdquo; instead of &amp;ldquo;//&amp;rdquo; to start a source code comment. If you don’t like this option you can suppress globally in the &amp;ldquo;GlobalSuppressions.cs&amp;rdquo; file but I prefer to fix it changing the way of how I write comments.&lt;/p&gt;
&lt;p&gt;Finally figure 12 show how the code looks at the end.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/stylecop-coding-style/12.png&#34; alt=&#34;Final code&#34;&gt;&lt;/p&gt;
&lt;p&gt;Figure 12.&lt;/p&gt;
&lt;p&gt;First that all our goal is fulfilled: 0 errors, 0 warnings, and 0 messages. Second, our resulting code is beautiful and self-explanatory for future modifications as well as less entries in other security analysis tools as HP Fortify.&lt;/p&gt;
&lt;p&gt;Is valid to mention that because this discipline requires to add comments in all instruments write all those comments manually is a tedious task. For that reason I also use another tool called &amp;ldquo;GhostDoc&amp;rdquo; that generate very accurate documentation depending of the context for the instrument being documented. The issue with this is that should be done one by one due to license limitation. Actually I use the free version but professional license allows to generate comments for a whole class, or file, or namespace in only one click or pressing &amp;ldquo;Shift + Ctrl + D&amp;rdquo; over the instrument. In the good news is that recently &amp;ldquo;GhostDoc&amp;rdquo; distributed a version using Visual Studio extension package and not the standalone application as it was, so the installation and updates become more ease.&lt;/p&gt;
&lt;p&gt;Team, once again these are my experience creating source codes. I know that follow this discipline is not funny if the product is not new but as Robert C. Martin say: &amp;ldquo;…no matter the state of a project, but anything you change try to do your best…&amp;rdquo; to me that means to not generate new warnings. At the end always think that the developer that touch you code in the future could be a serial killer and knows your address (Robert C. Martin quote too), so is better to leave the code as clean as possible.&lt;/p&gt;
&lt;p&gt;All of these started with a ReSharper question and will end with a ReSharper related comment. Sometimes the warnings reported by StyleCop and those reported by ReSharper enter in conflict between them. I usually give priority to those reported by StyleCop because I think they are more strict and compatible with more tools. Also there is no money associated because is free while ReSharper is not.&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Welcome</title>
      <link>/post/welcome/</link>
      <pubDate>Fri, 01 Jan 2021 00:00:00 +0000</pubDate>
      
      <guid>/post/welcome/</guid>
      
        <description>&lt;p&gt;I officially welcome you to my professional blog, I will try to write frequently about development technologies, programming languages, data structures, algorithms, among other topics related to this incredible technological world, always expressing my personal opinions.&lt;/p&gt;
&lt;p&gt;I decided to start thanks to the fact that I felt the urgent need to write after accumulating experience developing software and constantly explaining over and over again the concepts, approaches, and solutions applied; together with Scott Hanselman&amp;rsquo;s recommendation to write an article about everything that cannot be explained in six sentences.&lt;/p&gt;
&lt;p&gt;Most of the articles will also be translated into English. I hope to be of help to people who speak both languages.&lt;/p&gt;
</description>
      
    </item>
    
  </channel>
</rss>
